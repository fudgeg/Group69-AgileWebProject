{% extends "base.html" %} {% block title %}Notifications â€“ Soul Maps{% endblock
%} {% block content %}
<div class="home-container">
  <h2>Notifications</h2>
  <ul class="notifications-list">
    <!-- Friend Requests -->
    {% if friend_requests %} {% for request in friend_requests %}
    <li class="notification-item">
      <div class="notification-text">
        <strong>{{ request.sender.name }}</strong> sent you a friend request!
      </div>
      <div class="notification-actions">
        <form
          method="POST"
          action="{{ url_for('main.accept_friend_request', request_id=request.id) }}"
          style="display: inline"
        >
          <button class="btn btn-success btn-accept">Accept</button>
        </form>
        <form
          method="POST"
          action="{{ url_for('main.reject_friend_request', request_id=request.id) }}"
          style="display: inline"
        >
          <button class="btn btn-danger btn-reject">Reject</button>
        </form>
      </div>
    </li>
    {% endfor %} {% endif %}

    <!-- User Activities -->
    {% if activities %} {% for activity in activities %}
    <li class="notification-item">
      <div class="notification-text">
        <strong>{{ activity.user.name }}</strong> changed their {{
        activity.activity_type.replace("_", " ") }} from "<strong
          >{{ activity.old_value }}</strong
        >" to "<strong>{{ activity.new_value }}</strong>".
      </div>
    </li>
    {% endfor %} {% endif %} {% if snapshots %}
    <ul class="notifications-list">
      {% for snapshot in snapshots %}
      <li class="notification-item">
        <div class="notification-text">
          <strong>{{ snapshot.sender.name }}</strong> shared their media stats
          with you!
        </div>
        <div class="notification-details">
          <img
            src="{{ url_for('static', filename='snapshots/' ~ snapshot.snapshot_data) }}"
            alt="Snapshot"
            style="max-width: 100%; border-radius: 10px"
          />
        </div>
      </li>
      {% endfor %}
    </ul>
    {% endif %}

    <!-- No Notifications Fallback -->
    {% if not friend_requests and not activities and not snapshots %}
    <li>No new notifications.</li>
    {% endif %}
  </ul>
</div>
{% endblock %}
